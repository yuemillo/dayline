import{p as c,s as o}from"./main-314339aa.js";const a=document.querySelector(".signIn__errorMsg"),d=document.querySelector(".signIn__submitBtn"),n=document.querySelector(".signIn__userEmail"),i=document.querySelector(".signIn__userPsd");d.addEventListener("click",async e=>{if(e.preventDefault(),!(!n.value||!i.value))try{const s=await c("post","signin",{email:n.value,password:i.value});s.status===200&&(o("userId",s.data.user.id),o("token",s.data.accessToken),o("token-expire",Date.now()+36e5),location.href="./index.html")}catch(s){console.log(s);const t=s.response.data;t==="Email format is invalid"&&r(n,"信箱格式錯誤!!"),t==="Cannot find user"&&r(n,"此帳號不存在!!"),(t==="Incorrect password"||t==="Password is too short")&&r(i,"密碼錯誤!!")}});function r(e,s){e&&e.classList.add("signIn__input--invalid"),a.classList.remove("d-none"),a.textContent=s}[n,i].forEach(e=>{e.addEventListener("input",function(s){this.classList.contains("signIn__input--invalid")&&(this.classList.remove("signIn__input--invalid"),a.classList.add("d-none"))})});
