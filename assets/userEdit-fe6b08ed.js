import{p as i,g as c,r as y,s as p,m as g}from"./main-314339aa.js";f();let o={},l="";const r=document.querySelector(".userPic-selfie"),D=document.querySelector("#changeSelfieInput"),d=document.querySelector("#userName"),u=document.querySelector("#userDaylineType"),m=document.querySelector("#userIntroduction"),I=document.querySelector("#editUserSubmitBtn");async function f(){o=(await i("get",`600/users/${c("userId")}`,"",!0)).data,v(o)}f();function v(s){const{name:e,daylineType:a,introduction:t,selfieImg:n}=s;console.log(n),r.setAttribute("src",n?`data:image/png;base64,${n.img64}`:"../assets/images/Unknown_person.jpg"),d.value=e,u.value=a??"",m.value=t??"",c("needfocusDaylineType")&&u.focus(),y("needfocusDaylineType")}D.addEventListener("change",function(s){const e=s.target.files[0];if(e){const a=new FileReader;a.onload=function(t){const n=t.target.result.split(",")[1];r.src!==""&&r.src,l=n,r.src=t.target.result},a.readAsDataURL(e)}});I.addEventListener("click",async s=>{s.preventDefault();const e={name:d.value,selfieImg:{img64:l},daylineType:u.value,introduction:m.value,updateDate:Date.now()};for(let t in e)o[t]===e[t]&&delete e[t];console.log(e),e.updateDate!==o.updateDate&&p("isNewUser",!1),await i("patch",`600/users/${c("userId")}`,e,!0)&&g("success","更新成功","已成功更新個人資訊٩(๑•̀ω•́๑)۶")});
