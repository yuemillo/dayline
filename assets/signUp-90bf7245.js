import{v as i,p as l,s as r,m as c}from"./main-314339aa.js";const m=document.querySelector("#signUpBtn");m.addEventListener("click",s=>{s.preventDefault();const n={name:{presence:{message:"^暱稱必填",allowEmpty:!1}},email:{email:{message:"^信箱格式不正確"},presence:{message:"^信箱必填"}},password:{presence:{allowEmpty:!1,message:"^密碼必填"}}},e={name:document.querySelector("#user_name").value,email:document.querySelector("#user_email").value,password:document.querySelector("#user_password").value},o=i(e,n)??!1;o?Object.keys(o).forEach(t=>a(t,o[t])):u(e)});async function u(s){var o;const n=new Date().getTime(),e={...s,createDate:n,updateDate:n,isDoneToday:!1,posts:[],historyDayline:[]};try{(await l("post","signup",e)).status===201&&(r("isNewUser",!0),(await c("success","註冊成功!","立刻前往登入吧!",{confirmButtonText:"好"})).isConfirmed&&(location.href="./signIn.html"))}catch(t){console.log(t),((o=t==null?void 0:t.response)==null?void 0:o.data)==="Email already exists"&&a("email","該信箱已經被註冊了")}}function a(s,n){const e=document.getElementById(`user_${s}`).nextElementSibling;e.textContent=n,e.style.display="block"}const d=document.querySelectorAll("input.form-control");d.forEach(s=>s.addEventListener("input",function(n){const e=this.nextElementSibling;e.textContent!==""&&(e.textContent="",e.style.display="none")}));
